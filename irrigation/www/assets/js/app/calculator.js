define(["jquery"],function(e){var a=function(){var a=e("body"),o=e("input#horsepower-input"),r=e("input#annual-hours"),n=e("div#competitor-engine-slider"),l=e("div#propane-engine-slider"),s=e("div#price-per-gallon"),i=e("section#results"),t={},u={engineCost:{},fuelCost:{propane:{},diesel:{}},totalCost:{propane:{},diesel:{}},fuelSavings:{},totalSavings:{},horsepower:0,hoursOfUsage:0,gallonsConsumed:13.76,dieselRatio:1.57},p={app:"ag"},f=function(){a.on("refreshCalculation",v)},v=function(){d(),g(),h(),C(),a.trigger("refreshWaypoint")},d=function(){u.engineCost.propane=parseInt(S(l.val()),10),u.engineCost.diesel=parseInt(S(n.val()),10)},g=function(){var e=i.find("div.propane-fuel-cost");u.horsepower=parseInt(o.val(),10),u.hoursOfUsage=parseInt(r.val(),10),u.fuelCost.propane.perGallon=parseFloat(S(s.val()[0])),u.fuelCost.diesel.perGallon=parseFloat(S(s.val()[1])),u.fuelCost.propane.perHour=u.horsepower/u.gallonsConsumed*u.fuelCost.propane.perGallon,u.fuelCost.diesel.perHour=u.horsepower/u.gallonsConsumed/u.dieselRatio*u.fuelCost.diesel.perGallon,u.fuelCost.propane.oneYear=u.fuelCost.propane.perHour*u.hoursOfUsage,u.fuelCost.diesel.oneYear=u.fuelCost.diesel.perHour*u.hoursOfUsage,u.fuelCost.propane.fiveYear=u.fuelCost.propane.perHour*(5*u.hoursOfUsage),u.fuelCost.diesel.fiveYear=u.fuelCost.diesel.perHour*(5*u.hoursOfUsage),u.totalCost.propane.fiveYear=u.fuelCost.propane.fiveYear+u.engineCost.propane,u.totalCost.diesel.fiveYear=u.fuelCost.diesel.fiveYear+u.engineCost.diesel,e.find("div.one_year span.prop").html("$"+y(Math.round(u.fuelCost.propane.oneYear))),e.find("div.five_year span.prop").html("$"+y(Math.round(u.fuelCost.propane.fiveYear))),e.find("div.one_year strong.diesel").html("$"+y(Math.round(u.fuelCost.diesel.oneYear))),e.find("div.five_year strong.diesel").html("$"+y(Math.round(u.fuelCost.diesel.fiveYear)))},h=function(){var e=i.find("div.propane-savings");u.fuelSavings.hourly=u.fuelCost.diesel.perHour-u.fuelCost.propane.perHour,u.fuelSavings.oneYear=u.fuelSavings.hourly*u.hoursOfUsage,u.fuelSavings.fiveYear=u.fuelCost.diesel.fiveYear-u.fuelCost.propane.fiveYear,e.find("div.hourly span.prop").html("$"+u.fuelSavings.hourly.toFixed(2)),e.find("div.one_year span.prop").html("$"+y(Math.round(u.fuelSavings.oneYear))),e.find("div.five_year span.prop").html("$"+y(Math.round(u.fuelSavings.fiveYear)))},C=function(){var e=i.find("div.total-savings");u.totalSavings.oneYear=u.engineCost.diesel-u.engineCost.propane+u.fuelSavings.oneYear,u.totalSavings.fiveYear=u.totalCost.diesel.fiveYear-u.totalCost.propane.fiveYear,e.find("div.one_year span.prop").html("$"+y(Math.round(u.totalSavings.oneYear))),e.find("div.five_year span.prop").html("$"+y(Math.round(u.totalSavings.fiveYear)))},Y=function(){p.input=[{label:"Horsepower Required",value:o.val()},{label:"Hours of Usage per Year",value:r.val()},{label:"Propane Engine Purchase Amount",value:l.val()},{label:"Diesel Engine Purchase Amount",value:n.val()},{label:"Propane Price per Gallon",value:s.val()[0]},{label:"Diesel Price per Gallon",value:s.val()[1]}]},c=function(){p.output=[{label:"Propane Fuel Savings",body:[["Hourly","1 Year","5 Years"],["$"+u.fuelSavings.hourly.toFixed(2),"$"+y(Math.round(u.fuelSavings.oneYear)),"$"+y(Math.round(u.fuelSavings.fiveYear))]]},{label:"Total Savings Using Propane",body:[["1 Year","5 Years"],["$"+y(Math.round(u.totalSavings.oneYear)),"$"+y(Math.round(u.totalSavings.fiveYear))]]}]},S=function(e){return e.replace("$","").replace(",","")},y=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};return t.refresh=v,t.results=function(){return Y(),c(),p},f(),t}();return a});