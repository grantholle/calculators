define(["jquery"],function(e){var r=function(){var r,o,a,p,n,t=e("body"),l=e("input#mower-input"),u=e("input#annual-hours"),_=e("div#competitor-mower-slider"),f=e("div#propane-mower-slider"),i=e("div#price-per-gallon"),y={},h={propane:1.36,gasoline:1.3,diesel:.9},s={fuel_per_hour:{fuel_cost:{prop:0,other:0}},fuel_per_year:{one_year:{prop:0,other:0},three_year:{prop:0,other:0},five_year:{prop:0,other:0}},propane_savings:{one_year:{prop:0},three_year:{prop:0},five_year:{prop:0}}},v={app:"offroad"},c=function(){t.on("refreshCalculation",d)},d=function(e){"undefined"==typeof e&&(e="diesel"),r=e,o=e.charAt(0).toUpperCase()+e.slice(1),a=parseInt(l.val(),10),g(),$(),P(),b(),t.trigger("refreshWaypoint")},b=function(){e.each(s,function(r,o){var a=e("."+r);e.each(o,function(r,o){var p=a.find("."+r);e.each(o,function(e,r){p.find("."+e).html("$"+w(r))})})})},g=function(){var e=h.propane*parseFloat(m(i.val()[0])),o=h[r]*parseFloat(m(i.val()[1]));p=e*=a,n=o*=a,s.fuel_per_hour.fuel_cost={prop:e.toFixed(2),other:o.toFixed(2)}},$=function(){var e=parseInt(u.val(),10),r=e*p,o=e*n;s.fuel_per_year={one_year:{prop:Math.round(r),other:Math.round(o)},three_year:{prop:Math.round(3*r),other:Math.round(3*o)},five_year:{prop:Math.round(5*r),other:Math.round(5*o)}}},P=function(){var e=parseInt(m(f.val()),10),r=parseInt(m(_.val()),10);s.propane_savings={one_year:{prop:r*a-e*a+(s.fuel_per_year.one_year.other-s.fuel_per_year.one_year.prop)},three_year:{prop:r*a-e*a+(s.fuel_per_year.three_year.other-s.fuel_per_year.three_year.prop)},five_year:{prop:r*a-e*a+(s.fuel_per_year.five_year.other-s.fuel_per_year.five_year.prop)}}},A=function(){v.input=[{label:"Compare Propane with",value:o},{label:"Number of Mowers",value:l.val()},{label:"Total Hours Mowed per Year (per mower)",value:u.val()},{label:"Propane Mower Purchase Amount",value:f.val()},{label:o+" Mower Purchase Amount",value:_.val()},{label:"Price per Gallon of Propane",value:i.val()[0]},{label:"Price per Gallon of "+o,value:i.val()[1]}]},M=function(){v.output=[{label:"Fuel Costs per Hour of Mowing",body:[["PROPANE",o.toUpperCase()],["$"+s.fuel_per_hour.fuel_cost.prop,"$"+s.fuel_per_hour.fuel_cost.other]]},{label:"Fuel Costs per",body:[["","1 YEAR","3 YEARS","5 YEARS"],["PROPANE","$"+w(s.fuel_per_year.one_year.prop),"$"+w(s.fuel_per_year.three_year.prop),"$"+w(s.fuel_per_year.five_year.prop)],[o.toUpperCase(),"$"+w(s.fuel_per_year.one_year.other),"$"+w(s.fuel_per_year.three_year.other),"$"+w(s.fuel_per_year.five_year.other)]]},{label:"Total Savings Using Propane",body:[["1 YEAR","3 YEARS","5 YEARS"],["$"+w(s.propane_savings.one_year.prop),"$"+w(s.propane_savings.three_year.prop),"$"+w(s.propane_savings.five_year.prop)]]}]},m=function(e){return e.replace("$","").replace(",","")},w=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};return y.refresh=d,y.results=function(){return A(),M(),v},c(),y}();return r});